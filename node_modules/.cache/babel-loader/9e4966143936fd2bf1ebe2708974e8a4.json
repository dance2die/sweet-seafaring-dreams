{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _fuse = _interopRequireDefault(require(\"fuse.js\"));\n\nvar _reactOnclickoutside = _interopRequireDefault(require(\"react-onclickoutside\"));\n\nvar _Bem = _interopRequireDefault(require(\"./Bem\"));\n\nvar _FlattenOptions = _interopRequireDefault(require(\"./FlattenOptions\"));\n\nvar _GroupOptions = _interopRequireDefault(require(\"./GroupOptions\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar SelectSearch =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(SelectSearch, _React$PureComponent);\n  /**\n   * Component setup\n   * -------------------------------------------------------------------------*/\n\n\n  function SelectSearch(props) {\n    var _this;\n\n    _classCallCheck(this, SelectSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SelectSearch).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleClickOutside\", function () {\n      _this.onBlur();\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onBlur\", function () {\n      if (_this.props.search && !_this.props.multiple) {\n        _this.search.current.blur();\n      }\n\n      var search = '';\n\n      if (_this.state.value && _this.props.search && !_this.props.multiple) {\n        var option = _this.findByValue(null, _this.state.value);\n\n        if (option) {\n          search = option.name;\n        }\n      }\n\n      _this.setState({\n        focus: false,\n        highlighted: null,\n        search: search\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onFocus\", function () {\n      _this.setState({\n        focus: true,\n        options: _this.state.defaultOptions,\n        search: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onChange\", function (e) {\n      var value = e.target.value;\n\n      if (!value) {\n        value = '';\n      }\n\n      var options = _this.state.defaultOptions;\n      options = _this.getNewOptionsList(options, value);\n\n      _this.setState({\n        search: value,\n        options: options\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyPress\", function (e) {\n      if (!_this.state.options || _this.state.options.length < 1) {\n        return;\n      }\n      /** Enter */\n\n\n      if (e.keyCode === 13) {\n        _this.handleEnter();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyDown\", function (e) {\n      if (!_this.state.focus) {\n        return;\n      }\n      /** Tab */\n\n\n      if (e.keyCode === 9) {\n        _this.onBlur();\n\n        return;\n      }\n      /** Arrow Down */\n\n\n      if (e.keyCode === 40) {\n        _this.handleArrowDown();\n      }\n      /** Arrow Up */\n\n\n      if (e.keyCode === 38) {\n        _this.handleArrowUp();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyUp\", function (e) {\n      /** Esc */\n      if (e.keyCode === 27) {\n        _this.handleEsc();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"toggle\", function () {\n      if (_this.state.focus) {\n        _this.onBlur();\n      } else {\n        _this.onFocus();\n      }\n    });\n\n    var _options = props.options,\n        _value = props.value,\n        multiple = props.multiple,\n        className = props.className;\n    var stateValue = !_value && multiple ? [] : _value;\n    var flattenedOptions = (0, _FlattenOptions.default)(_options);\n    var _search = '';\n\n    if (stateValue) {\n      var option = _this.findByValue(flattenedOptions, stateValue);\n\n      if (option) {\n        _search = option.name;\n      }\n    }\n\n    _this.state = {\n      search: _search,\n      value: stateValue,\n      defaultOptions: flattenedOptions,\n      options: flattenedOptions,\n      highlighted: null,\n      focus: false\n    };\n    _this.classes = {\n      container: multiple ? \"\".concat(className, \" \").concat(_Bem.default.m(className, 'multiple')) : className,\n      search: _Bem.default.e(className, 'search'),\n      select: _Bem.default.e(className, 'select'),\n      options: _Bem.default.e(className, 'options'),\n      option: _Bem.default.e(className, 'option'),\n      row: _Bem.default.e(className, 'row'),\n      group: _Bem.default.e(className, 'group'),\n      groupHeader: _Bem.default.e(className, 'group-header'),\n      out: _Bem.default.e(className, 'out'),\n      label: _Bem.default.e(className, 'label'),\n      focus: multiple ? \"\".concat(className, \" \").concat(_Bem.default.m(className, 'multiple focus')) : \"\".concat(className, \" \").concat(_Bem.default.m(className, 'focus'))\n    };\n\n    if (multiple && !_this.props.search) {\n      _this.classes.container += \" \".concat(_Bem.default.m(_Bem.default.e(className, 'icon'), 'disabled'));\n    }\n\n    if (!_this.props.search) {\n      _this.classes.focus += \" \".concat(_Bem.default.m(_Bem.default.e(className, 'icon'), 'disabled'));\n    }\n\n    _this.classes.container += \" \".concat(_Bem.default.m(className, 'select'));\n    _this.classes.focus += \" \".concat(_Bem.default.m(className, 'select'));\n    _this.container = _react.default.createRef();\n    _this.selectOptions = _react.default.createRef();\n    _this.select = _react.default.createRef();\n    _this.search = _react.default.createRef();\n    _this.outInput = _react.default.createRef();\n    return _this;\n  }\n  /**\n   * Component lifecycle\n   * -------------------------------------------------------------------------*/\n\n\n  _createClass(SelectSearch, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.onMount.call(null, this.publishOption(), this.state, this.props);\n      this.scrollToSelected();\n\n      if (this.search.current && this.props.autofocus === true) {\n        this.search.current.focus();\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var nextState = {};\n      var _this$state = this.state,\n          defaultOptions = _this$state.defaultOptions,\n          value = _this$state.value;\n\n      if (nextProps.options !== defaultOptions) {\n        var flattenedOptions = (0, _FlattenOptions.default)(nextProps.options);\n        nextState.options = flattenedOptions;\n        nextState.defaultOptions = flattenedOptions;\n      }\n\n      if (nextProps.value !== value) {\n        var option = this.findByValue(defaultOptions, nextProps.value);\n\n        if (option) {\n          nextState.value = nextProps.value;\n          nextState.search = option.name;\n        } else {\n          nextState.value = [];\n          nextState.search = '';\n        }\n      }\n\n      this.setState(nextState);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      /* Fire callbacks */\n      if (this.state.focus && this.state.focus !== prevState.focus) {\n        this.handleFocus();\n        this.props.onFocus.call(null, this.publishOption(), this.state, this.props);\n      }\n\n      if (!this.state.focus && this.state.focus !== prevState.focus) {\n        this.handleBlur();\n        this.props.onBlur.call(null, this.publishOption(), this.state, this.props);\n      }\n\n      if (this.state.highlighted !== prevState.highlighted) {\n        this.props.onHighlight.call(null, this.state.options[this.state.highlighted], this.state, this.props);\n      }\n\n      this.scrollToSelected(true);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('keydown', this.onKeyDown);\n      document.removeEventListener('keypress', this.onKeyPress);\n      document.removeEventListener('keyup', this.onKeyUp);\n    }\n    /**\n     * DOM event handlers\n     * -------------------------------------------------------------------------*/\n\n  }, {\n    key: \"handleArrowDown\",\n\n    /**\n     * Keyboard actions\n     * -------------------------------------------------------------------------*/\n    value: function handleArrowDown() {\n      if (this.state.options.length < 1) {\n        return;\n      }\n\n      var highlighted = null;\n\n      if (this.state.highlighted != null) {\n        highlighted = this.state.highlighted + 1;\n      } else {\n        highlighted = 0;\n      }\n\n      if (highlighted > this.state.options.length - 1) {\n        highlighted = 0;\n      }\n\n      this.setState({\n        highlighted: highlighted\n      });\n    }\n  }, {\n    key: \"handleArrowUp\",\n    value: function handleArrowUp() {\n      if (this.state.options.length < 1) {\n        return;\n      }\n\n      var highlighted = this.state.options.length - 1;\n\n      if (this.state.highlighted != null) {\n        highlighted = this.state.highlighted - 1;\n      }\n\n      if (highlighted < 0) {\n        highlighted = this.state.options.length - 1;\n      }\n\n      this.setState({\n        highlighted: highlighted\n      });\n    }\n  }, {\n    key: \"handleEnter\",\n    value: function handleEnter() {\n      this.chooseOption();\n    }\n  }, {\n    key: \"handleEsc\",\n    value: function handleEsc() {\n      this.onBlur();\n    }\n    /**\n     * Custom methods\n     * -------------------------------------------------------------------------*/\n\n  }, {\n    key: \"publishOption\",\n    value: function publishOption(value) {\n      var publishValue = value;\n\n      if (typeof value === 'undefined') {\n        publishValue = this.state.value;\n      }\n\n      if (this.props.multiple) {\n        return this.publishOptionMultiple(publishValue);\n      }\n\n      return this.publishOptionSingle(publishValue);\n    }\n  }, {\n    key: \"publishOptionSingle\",\n    value: function publishOptionSingle(value) {\n      return this.findByValue(null, value);\n    }\n  }, {\n    key: \"publishOptionMultiple\",\n    value: function publishOptionMultiple(value) {\n      var _this2 = this;\n\n      return value.map(function (publishValue) {\n        return _this2.findByValue(null, publishValue);\n      });\n    }\n  }, {\n    key: \"handleFocus\",\n    value: function handleFocus() {\n      document.addEventListener('keydown', this.onKeyDown);\n      document.addEventListener('keypress', this.onKeyPress);\n      document.addEventListener('keyup', this.onKeyUp);\n\n      if (this.state.options.length > 0 && !this.props.multiple) {\n        var element = this.select.current;\n        var clientHeight = document.documentElement.clientHeight;\n        var viewportHeight = Math.max(clientHeight, window.innerHeight || 0);\n        var elementPos = element.getBoundingClientRect();\n        var selectHeight = viewportHeight - elementPos.top - 20;\n        element.style.maxHeight = \"\".concat(selectHeight, \"px\");\n        this.scrollToSelected(true, 'selected');\n      }\n    }\n  }, {\n    key: \"handleBlur\",\n    value: function handleBlur() {\n      document.removeEventListener('keydown', this.onKeyDown);\n      document.removeEventListener('keypress', this.onKeyPress);\n      document.removeEventListener('keyup', this.onKeyUp);\n    }\n  }, {\n    key: \"findByValue\",\n    value: function findByValue(source, value) {\n      var findSource = source;\n\n      if (!source || source.length < 1) {\n        findSource = this.state.defaultOptions;\n      }\n\n      if (!findSource) {\n        return null;\n      }\n\n      return findSource.filter(function (object) {\n        return object.value === value;\n      })[0];\n    }\n  }, {\n    key: \"chooseOption\",\n    value: function chooseOption(value) {\n      var _this3 = this;\n\n      var currentValue = this.state.value.slice();\n      var option;\n      var search;\n\n      if (!value) {\n        var index = this.state.highlighted;\n\n        if (!index || this.state.options.length - 1 < index) {\n          index = 0;\n        }\n\n        option = this.state.options[index];\n      } else {\n        option = this.findByValue(this.state.defaultOptions, value);\n      }\n\n      if (this.props.multiple) {\n        if (!currentValue) {\n          currentValue = [];\n        }\n\n        var currentIndex = currentValue.indexOf(option.value);\n        currentIndex > -1 ? currentValue.splice(currentIndex, 1) : currentValue.push(option.value);\n        search = '';\n      } else {\n        currentValue = option.value;\n        search = option.name;\n      }\n\n      var options = this.state.defaultOptions;\n      var highlighted = this.props.multiple ? this.state.highlighted : null;\n      this.setState({\n        value: currentValue,\n        search: search,\n        options: options,\n        highlighted: highlighted,\n        focus: this.props.multiple\n      });\n      setTimeout(function () {\n        var publishOption = _this3.publishOption(currentValue);\n\n        _this3.props.onChange.call(null, publishOption, _this3.state, _this3.props);\n      }, 50);\n\n      if (this.props.search && !this.props.multiple) {\n        this.search.current.blur();\n      }\n    }\n  }, {\n    key: \"removeOption\",\n    value: function removeOption(value) {\n      var _this4 = this;\n\n      if (!value) {\n        return false;\n      }\n\n      var option = this.findByValue(this.state.defaultOptions, value);\n      var optionValue = this.state.value.slice();\n\n      if (!option || optionValue.indexOf(option.value) < 0) {\n        return false;\n      }\n\n      optionValue.splice(optionValue.indexOf(option.value), 1);\n      this.setState({\n        value: optionValue,\n        search: ''\n      });\n      setTimeout(function () {\n        _this4.props.onChange.call(null, _this4.publishOption(optionValue), _this4.state, _this4.props);\n      }, 50);\n      return true;\n    }\n  }, {\n    key: \"getNewOptionsList\",\n    value: function getNewOptionsList(options, value) {\n      if (options && options.length > 0 && value && value.length > 0) {\n        var fuse = new _fuse.default(options, this.props.fuse);\n        return fuse.search(value).map(function (item, index) {\n          return Object.assign({}, item, {\n            index: index\n          });\n        });\n      }\n\n      return options;\n    }\n  }, {\n    key: \"scrollToSelected\",\n    value: function scrollToSelected() {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var selected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hover';\n\n      if (!force && (this.props.multiple || this.state.highlighted == null || !this.select.current || !this.state.focus || this.state.options.length < 1) || !this.selectOptions.current) {\n        return;\n      }\n\n      var selectedItem = this.selectOptions.current.querySelector(\".\".concat(_Bem.default.m(this.classes.option, selected)));\n\n      if (selectedItem) {\n        var searchOffset = this.search.current ? this.search.current.clientHeight : 0;\n        this.select.current.scrollTop = selectedItem.offsetTop - searchOffset - this.props.height / 2 + selectedItem.clientHeight / 2;\n      }\n    }\n    /**\n     * Component render\n     * -------------------------------------------------------------------------*/\n\n  }, {\n    key: \"renderOption\",\n    value: function renderOption(option, stateValue, multiple) {\n      var _this5 = this;\n\n      var elementVal = option.value;\n      var element = null;\n      var className = this.classes.option;\n      className += \" \".concat(this.classes.row);\n\n      if (this.state.highlighted === option.index) {\n        className += \" \".concat(_Bem.default.m(this.classes.option, 'hover'));\n      }\n\n      if (multiple && stateValue.indexOf(elementVal) >= 0 || elementVal === stateValue) {\n        className += \" \".concat(_Bem.default.m(this.classes.option, 'selected'));\n      }\n\n      if (this.props.multiple) {\n        if (this.state.value.indexOf(option.value) < 0) {\n          element = _react.default.createElement(\"li\", {\n            role: \"menuitem\",\n            className: className,\n            onClick: function onClick() {\n              return _this5.chooseOption(option.value);\n            },\n            key: \"\".concat(option.value, \"-option\"),\n            \"data-value\": option.value\n          }, this.props.renderOption(option, this.state, this.props));\n        } else {\n          element = _react.default.createElement(\"li\", {\n            role: \"menuitem\",\n            className: className,\n            onClick: function onClick() {\n              return _this5.removeOption(option.value);\n            },\n            key: \"\".concat(option.value, \"-option\"),\n            \"data-value\": option.value\n          }, this.props.renderOption(option, this.state, this.props));\n        }\n      } else if (option.value === this.state.value) {\n        element = _react.default.createElement(\"li\", {\n          role: \"menuitem\",\n          className: className,\n          key: \"\".concat(option.value, \"-option\"),\n          \"data-value\": option.value\n        }, this.props.renderOption(option));\n      } else {\n        element = _react.default.createElement(\"li\", {\n          role: \"menuitem\",\n          className: className,\n          onClick: function onClick() {\n            return _this5.chooseOption(option.value);\n          },\n          key: \"\".concat(option.value, \"-option\"),\n          \"data-value\": option.value\n        }, this.props.renderOption(option, this.state, this.props));\n      }\n\n      return element;\n    }\n  }, {\n    key: \"renderOptions\",\n    value: function renderOptions() {\n      var _this6 = this;\n\n      var select = null;\n      var selectStyle = {};\n      var options = [];\n      var multiple = this.props.multiple;\n      var _this$state2 = this.state,\n          stateValue = _this$state2.value,\n          foundOptions = _this$state2.options;\n\n      if (foundOptions && foundOptions.length > 0) {\n        var groupedOptions = (0, _GroupOptions.default)(foundOptions);\n\n        if (groupedOptions && groupedOptions.length) {\n          groupedOptions.forEach(function (option) {\n            if ({}.hasOwnProperty.call(option, 'type') && option.type === 'group') {\n              var subOptions = [];\n              option.items.forEach(function (groupOption) {\n                subOptions.push(_this6.renderOption(groupOption, stateValue, multiple));\n              });\n              options.push(_react.default.createElement(\"li\", {\n                className: _this6.classes.row,\n                key: option.groupId\n              }, _react.default.createElement(\"div\", {\n                className: _this6.classes.group\n              }, _react.default.createElement(\"div\", {\n                className: _this6.classes.groupHeader\n              }, _this6.props.renderGroupHeader(option.name)), _react.default.createElement(\"ul\", {\n                className: _this6.classes.options\n              }, subOptions))));\n            } else {\n              options.push(_this6.renderOption(option, stateValue, multiple));\n            }\n          });\n\n          if (options.length > 0) {\n            select = _react.default.createElement(\"ul\", {\n              ref: this.selectOptions,\n              className: this.classes.options\n            }, options);\n          }\n        }\n      }\n\n      if (this.props.multiple) {\n        selectStyle.height = this.props.height;\n      }\n\n      var className = this.classes.select;\n\n      if (this.state.focus) {\n        className += \" \".concat(_Bem.default.m(this.classes.select, 'display'));\n      }\n\n      return _react.default.createElement(\"div\", {\n        ref: this.select,\n        className: className,\n        style: selectStyle\n      }, select);\n    }\n  }, {\n    key: \"renderOutElement\",\n    value: function renderOutElement() {\n      var _this7 = this;\n\n      var option = null;\n      var outElement;\n\n      if (this.props.multiple) {\n        if (Object.prototype.toString.call(this.state.value) == '[object Array]' && this.state.value.length) {\n          var finalValueOptions = [];\n          this.state.value.forEach(function (value) {\n            option = _this7.findByValue(_this7.state.defaultOptions, value);\n            finalValueOptions.push(_react.default.createElement(\"option\", {\n              key: option.value,\n              value: option.value\n            }, option.name));\n          });\n          outElement = _react.default.createElement(\"select\", {\n            value: this.state.value,\n            className: this.classes.out,\n            name: this.props.name,\n            readOnly: true,\n            multiple: true\n          }, finalValueOptions);\n        } else {\n          outElement = _react.default.createElement(\"select\", {\n            className: this.classes.out,\n            name: this.props.name,\n            readOnly: true,\n            multiple: true\n          }, _react.default.createElement(\"option\", null, \"Nothing selected\"));\n        }\n      } else if (this.props.search) {\n        outElement = _react.default.createElement(\"input\", {\n          type: \"hidden\",\n          autoComplete: this.props.autoComplete,\n          defaultValue: this.state.value,\n          ref: this.outInput,\n          name: this.props.name\n        });\n      } else {\n        var outStyle = {\n          opacity: 0,\n          position: 'absolute',\n          top: '-9999px',\n          left: '-9999px'\n        };\n        outElement = _react.default.createElement(\"input\", {\n          type: \"text\",\n          autoComplete: this.props.autoComplete,\n          onFocus: this.onFocus,\n          style: outStyle,\n          value: this.state.value,\n          readOnly: true,\n          ref: this.outInput,\n          name: this.props.name\n        });\n      }\n\n      return outElement;\n    }\n  }, {\n    key: \"renderSearchField\",\n    value: function renderSearchField() {\n      var searchField = null;\n\n      if (this.props.search) {\n        var name = null;\n        searchField = _react.default.createElement(\"input\", {\n          name: name,\n          autoComplete: this.props.autoComplete,\n          ref: this.search,\n          onFocus: this.onFocus,\n          onKeyPress: this.onKeyPress,\n          className: this.classes.search,\n          type: \"search\",\n          value: this.state.search,\n          onChange: this.onChange,\n          placeholder: this.props.placeholder\n        });\n      } else {\n        if (this.props.multiple) {\n          return null;\n        }\n\n        var option;\n        var labelValue;\n        var labelClassName;\n\n        if (!this.state.value) {\n          labelValue = this.props.placeholder;\n          labelClassName = \"\".concat(this.classes.search, \" \").concat(_Bem.default.m(this.classes.search, 'placeholder'));\n        } else {\n          option = this.findByValue(this.state.defaultOptions, this.state.value);\n\n          if (!option) {\n            option = this.state.defaultOptions[0];\n          }\n\n          labelValue = option.name;\n          labelClassName = this.classes.search;\n        }\n\n        searchField = _react.default.createElement(\"div\", {\n          tabIndex: 0,\n          role: \"button\",\n          onClick: this.toggle,\n          className: labelClassName\n        }, this.props.renderValue(labelValue, option, this.state, this.props));\n      }\n\n      return searchField;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var className = this.state.focus ? this.classes.focus : this.classes.container;\n      return _react.default.createElement(\"div\", {\n        className: className,\n        ref: this.container\n      }, this.renderOutElement(), this.renderSearchField(), this.renderOptions());\n    }\n  }]);\n\n  return SelectSearch;\n}(_react.default.PureComponent);\n\n_defineProperty(SelectSearch, \"defaultProps\", {\n  className: 'select-search-box',\n  search: true,\n  value: '',\n  placeholder: null,\n  multiple: false,\n  height: 200,\n  name: null,\n  autoComplete: 'on',\n  autofocus: false,\n  onHighlight: function onHighlight() {},\n  onMount: function onMount() {},\n  onBlur: function onBlur() {},\n  onFocus: function onFocus() {},\n  onChange: function onChange() {},\n  renderOption: function renderOption(option) {\n    return option.name;\n  },\n  renderGroupHeader: function renderGroupHeader(title) {\n    return title;\n  },\n  renderValue: function renderValue(label) {\n    return label;\n  },\n  fuse: {\n    keys: ['name', 'groupName'],\n    threshold: 0.3\n  }\n});\n\nvar _default = (0, _reactOnclickoutside.default)(SelectSearch);\n\nexports.default = _default;","map":{"version":3,"sources":["/Users/mark/Documents/Code/sweet-seafaring-dreams/node_modules/react-select-search/dist/index.js"],"names":["Object","defineProperty","exports","value","default","_react","_interopRequireDefault","require","_fuse","_reactOnclickoutside","_Bem","_FlattenOptions","_GroupOptions","obj","__esModule","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","_createClass","protoProps","staticProps","_possibleConstructorReturn","self","call","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","create","_setPrototypeOf","p","ReferenceError","_defineProperty","SelectSearch","_React$PureComponent","_this","onBlur","search","multiple","current","blur","state","option","findByValue","name","setState","focus","highlighted","options","defaultOptions","e","getNewOptionsList","keyCode","handleEnter","handleArrowDown","handleArrowUp","handleEsc","onFocus","_options","_value","className","stateValue","flattenedOptions","_search","classes","container","concat","m","select","row","group","groupHeader","out","label","createRef","selectOptions","outInput","componentDidMount","onMount","publishOption","scrollToSelected","autofocus","componentWillReceiveProps","nextProps","nextState","_this$state","componentDidUpdate","prevProps","prevState","handleFocus","handleBlur","onHighlight","componentWillUnmount","document","removeEventListener","onKeyDown","onKeyPress","onKeyUp","chooseOption","publishValue","publishOptionMultiple","publishOptionSingle","_this2","map","addEventListener","element","clientHeight","documentElement","viewportHeight","Math","max","window","innerHeight","elementPos","getBoundingClientRect","selectHeight","top","style","maxHeight","source","findSource","filter","object","_this3","currentValue","slice","index","currentIndex","indexOf","splice","push","setTimeout","onChange","removeOption","_this4","optionValue","fuse","item","assign","force","arguments","undefined","selected","selectedItem","querySelector","searchOffset","scrollTop","offsetTop","height","renderOption","_this5","elementVal","createElement","role","onClick","renderOptions","_this6","selectStyle","_this$state2","foundOptions","groupedOptions","forEach","hasOwnProperty","type","subOptions","items","groupOption","groupId","renderGroupHeader","ref","renderOutElement","_this7","outElement","toString","finalValueOptions","readOnly","autoComplete","defaultValue","outStyle","opacity","position","left","renderSearchField","searchField","placeholder","labelValue","labelClassName","tabIndex","toggle","renderValue","render","PureComponent","title","keys","threshold","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _fuse = _interopRequireDefault(require(\"fuse.js\"));\n\nvar _reactOnclickoutside = _interopRequireDefault(require(\"react-onclickoutside\"));\n\nvar _Bem = _interopRequireDefault(require(\"./Bem\"));\n\nvar _FlattenOptions = _interopRequireDefault(require(\"./FlattenOptions\"));\n\nvar _GroupOptions = _interopRequireDefault(require(\"./GroupOptions\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar SelectSearch =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(SelectSearch, _React$PureComponent);\n\n  /**\n   * Component setup\n   * -------------------------------------------------------------------------*/\n  function SelectSearch(props) {\n    var _this;\n\n    _classCallCheck(this, SelectSearch);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SelectSearch).call(this, props));\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"handleClickOutside\", function () {\n      _this.onBlur();\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onBlur\", function () {\n      if (_this.props.search && !_this.props.multiple) {\n        _this.search.current.blur();\n      }\n\n      var search = '';\n\n      if (_this.state.value && _this.props.search && !_this.props.multiple) {\n        var option = _this.findByValue(null, _this.state.value);\n\n        if (option) {\n          search = option.name;\n        }\n      }\n\n      _this.setState({\n        focus: false,\n        highlighted: null,\n        search: search\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onFocus\", function () {\n      _this.setState({\n        focus: true,\n        options: _this.state.defaultOptions,\n        search: ''\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onChange\", function (e) {\n      var value = e.target.value;\n\n      if (!value) {\n        value = '';\n      }\n\n      var options = _this.state.defaultOptions;\n      options = _this.getNewOptionsList(options, value);\n\n      _this.setState({\n        search: value,\n        options: options\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyPress\", function (e) {\n      if (!_this.state.options || _this.state.options.length < 1) {\n        return;\n      }\n      /** Enter */\n\n\n      if (e.keyCode === 13) {\n        _this.handleEnter();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyDown\", function (e) {\n      if (!_this.state.focus) {\n        return;\n      }\n      /** Tab */\n\n\n      if (e.keyCode === 9) {\n        _this.onBlur();\n\n        return;\n      }\n      /** Arrow Down */\n\n\n      if (e.keyCode === 40) {\n        _this.handleArrowDown();\n      }\n      /** Arrow Up */\n\n\n      if (e.keyCode === 38) {\n        _this.handleArrowUp();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"onKeyUp\", function (e) {\n      /** Esc */\n      if (e.keyCode === 27) {\n        _this.handleEsc();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), \"toggle\", function () {\n      if (_this.state.focus) {\n        _this.onBlur();\n      } else {\n        _this.onFocus();\n      }\n    });\n\n    var _options = props.options,\n        _value = props.value,\n        multiple = props.multiple,\n        className = props.className;\n    var stateValue = !_value && multiple ? [] : _value;\n    var flattenedOptions = (0, _FlattenOptions.default)(_options);\n    var _search = '';\n\n    if (stateValue) {\n      var option = _this.findByValue(flattenedOptions, stateValue);\n\n      if (option) {\n        _search = option.name;\n      }\n    }\n\n    _this.state = {\n      search: _search,\n      value: stateValue,\n      defaultOptions: flattenedOptions,\n      options: flattenedOptions,\n      highlighted: null,\n      focus: false\n    };\n    _this.classes = {\n      container: multiple ? \"\".concat(className, \" \").concat(_Bem.default.m(className, 'multiple')) : className,\n      search: _Bem.default.e(className, 'search'),\n      select: _Bem.default.e(className, 'select'),\n      options: _Bem.default.e(className, 'options'),\n      option: _Bem.default.e(className, 'option'),\n      row: _Bem.default.e(className, 'row'),\n      group: _Bem.default.e(className, 'group'),\n      groupHeader: _Bem.default.e(className, 'group-header'),\n      out: _Bem.default.e(className, 'out'),\n      label: _Bem.default.e(className, 'label'),\n      focus: multiple ? \"\".concat(className, \" \").concat(_Bem.default.m(className, 'multiple focus')) : \"\".concat(className, \" \").concat(_Bem.default.m(className, 'focus'))\n    };\n\n    if (multiple && !_this.props.search) {\n      _this.classes.container += \" \".concat(_Bem.default.m(_Bem.default.e(className, 'icon'), 'disabled'));\n    }\n\n    if (!_this.props.search) {\n      _this.classes.focus += \" \".concat(_Bem.default.m(_Bem.default.e(className, 'icon'), 'disabled'));\n    }\n\n    _this.classes.container += \" \".concat(_Bem.default.m(className, 'select'));\n    _this.classes.focus += \" \".concat(_Bem.default.m(className, 'select'));\n    _this.container = _react.default.createRef();\n    _this.selectOptions = _react.default.createRef();\n    _this.select = _react.default.createRef();\n    _this.search = _react.default.createRef();\n    _this.outInput = _react.default.createRef();\n    return _this;\n  }\n  /**\n   * Component lifecycle\n   * -------------------------------------------------------------------------*/\n\n\n  _createClass(SelectSearch, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.onMount.call(null, this.publishOption(), this.state, this.props);\n      this.scrollToSelected();\n\n      if (this.search.current && this.props.autofocus === true) {\n        this.search.current.focus();\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var nextState = {};\n      var _this$state = this.state,\n          defaultOptions = _this$state.defaultOptions,\n          value = _this$state.value;\n\n      if (nextProps.options !== defaultOptions) {\n        var flattenedOptions = (0, _FlattenOptions.default)(nextProps.options);\n        nextState.options = flattenedOptions;\n        nextState.defaultOptions = flattenedOptions;\n      }\n\n      if (nextProps.value !== value) {\n        var option = this.findByValue(defaultOptions, nextProps.value);\n\n        if (option) {\n          nextState.value = nextProps.value;\n          nextState.search = option.name;\n        } else {\n          nextState.value = [];\n          nextState.search = '';\n        }\n      }\n\n      this.setState(nextState);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      /* Fire callbacks */\n      if (this.state.focus && this.state.focus !== prevState.focus) {\n        this.handleFocus();\n        this.props.onFocus.call(null, this.publishOption(), this.state, this.props);\n      }\n\n      if (!this.state.focus && this.state.focus !== prevState.focus) {\n        this.handleBlur();\n        this.props.onBlur.call(null, this.publishOption(), this.state, this.props);\n      }\n\n      if (this.state.highlighted !== prevState.highlighted) {\n        this.props.onHighlight.call(null, this.state.options[this.state.highlighted], this.state, this.props);\n      }\n\n      this.scrollToSelected(true);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      document.removeEventListener('keydown', this.onKeyDown);\n      document.removeEventListener('keypress', this.onKeyPress);\n      document.removeEventListener('keyup', this.onKeyUp);\n    }\n    /**\n     * DOM event handlers\n     * -------------------------------------------------------------------------*/\n\n  }, {\n    key: \"handleArrowDown\",\n\n    /**\n     * Keyboard actions\n     * -------------------------------------------------------------------------*/\n    value: function handleArrowDown() {\n      if (this.state.options.length < 1) {\n        return;\n      }\n\n      var highlighted = null;\n\n      if (this.state.highlighted != null) {\n        highlighted = this.state.highlighted + 1;\n      } else {\n        highlighted = 0;\n      }\n\n      if (highlighted > this.state.options.length - 1) {\n        highlighted = 0;\n      }\n\n      this.setState({\n        highlighted: highlighted\n      });\n    }\n  }, {\n    key: \"handleArrowUp\",\n    value: function handleArrowUp() {\n      if (this.state.options.length < 1) {\n        return;\n      }\n\n      var highlighted = this.state.options.length - 1;\n\n      if (this.state.highlighted != null) {\n        highlighted = this.state.highlighted - 1;\n      }\n\n      if (highlighted < 0) {\n        highlighted = this.state.options.length - 1;\n      }\n\n      this.setState({\n        highlighted: highlighted\n      });\n    }\n  }, {\n    key: \"handleEnter\",\n    value: function handleEnter() {\n      this.chooseOption();\n    }\n  }, {\n    key: \"handleEsc\",\n    value: function handleEsc() {\n      this.onBlur();\n    }\n    /**\n     * Custom methods\n     * -------------------------------------------------------------------------*/\n\n  }, {\n    key: \"publishOption\",\n    value: function publishOption(value) {\n      var publishValue = value;\n\n      if (typeof value === 'undefined') {\n        publishValue = this.state.value;\n      }\n\n      if (this.props.multiple) {\n        return this.publishOptionMultiple(publishValue);\n      }\n\n      return this.publishOptionSingle(publishValue);\n    }\n  }, {\n    key: \"publishOptionSingle\",\n    value: function publishOptionSingle(value) {\n      return this.findByValue(null, value);\n    }\n  }, {\n    key: \"publishOptionMultiple\",\n    value: function publishOptionMultiple(value) {\n      var _this2 = this;\n\n      return value.map(function (publishValue) {\n        return _this2.findByValue(null, publishValue);\n      });\n    }\n  }, {\n    key: \"handleFocus\",\n    value: function handleFocus() {\n      document.addEventListener('keydown', this.onKeyDown);\n      document.addEventListener('keypress', this.onKeyPress);\n      document.addEventListener('keyup', this.onKeyUp);\n\n      if (this.state.options.length > 0 && !this.props.multiple) {\n        var element = this.select.current;\n        var clientHeight = document.documentElement.clientHeight;\n        var viewportHeight = Math.max(clientHeight, window.innerHeight || 0);\n        var elementPos = element.getBoundingClientRect();\n        var selectHeight = viewportHeight - elementPos.top - 20;\n        element.style.maxHeight = \"\".concat(selectHeight, \"px\");\n        this.scrollToSelected(true, 'selected');\n      }\n    }\n  }, {\n    key: \"handleBlur\",\n    value: function handleBlur() {\n      document.removeEventListener('keydown', this.onKeyDown);\n      document.removeEventListener('keypress', this.onKeyPress);\n      document.removeEventListener('keyup', this.onKeyUp);\n    }\n  }, {\n    key: \"findByValue\",\n    value: function findByValue(source, value) {\n      var findSource = source;\n\n      if (!source || source.length < 1) {\n        findSource = this.state.defaultOptions;\n      }\n\n      if (!findSource) {\n        return null;\n      }\n\n      return findSource.filter(function (object) {\n        return object.value === value;\n      })[0];\n    }\n  }, {\n    key: \"chooseOption\",\n    value: function chooseOption(value) {\n      var _this3 = this;\n\n      var currentValue = this.state.value.slice();\n      var option;\n      var search;\n\n      if (!value) {\n        var index = this.state.highlighted;\n\n        if (!index || this.state.options.length - 1 < index) {\n          index = 0;\n        }\n\n        option = this.state.options[index];\n      } else {\n        option = this.findByValue(this.state.defaultOptions, value);\n      }\n\n      if (this.props.multiple) {\n        if (!currentValue) {\n          currentValue = [];\n        }\n\n        var currentIndex = currentValue.indexOf(option.value);\n        currentIndex > -1 ? currentValue.splice(currentIndex, 1) : currentValue.push(option.value);\n        search = '';\n      } else {\n        currentValue = option.value;\n        search = option.name;\n      }\n\n      var options = this.state.defaultOptions;\n      var highlighted = this.props.multiple ? this.state.highlighted : null;\n      this.setState({\n        value: currentValue,\n        search: search,\n        options: options,\n        highlighted: highlighted,\n        focus: this.props.multiple\n      });\n      setTimeout(function () {\n        var publishOption = _this3.publishOption(currentValue);\n\n        _this3.props.onChange.call(null, publishOption, _this3.state, _this3.props);\n      }, 50);\n\n      if (this.props.search && !this.props.multiple) {\n        this.search.current.blur();\n      }\n    }\n  }, {\n    key: \"removeOption\",\n    value: function removeOption(value) {\n      var _this4 = this;\n\n      if (!value) {\n        return false;\n      }\n\n      var option = this.findByValue(this.state.defaultOptions, value);\n      var optionValue = this.state.value.slice();\n\n      if (!option || optionValue.indexOf(option.value) < 0) {\n        return false;\n      }\n\n      optionValue.splice(optionValue.indexOf(option.value), 1);\n      this.setState({\n        value: optionValue,\n        search: ''\n      });\n      setTimeout(function () {\n        _this4.props.onChange.call(null, _this4.publishOption(optionValue), _this4.state, _this4.props);\n      }, 50);\n      return true;\n    }\n  }, {\n    key: \"getNewOptionsList\",\n    value: function getNewOptionsList(options, value) {\n      if (options && options.length > 0 && value && value.length > 0) {\n        var fuse = new _fuse.default(options, this.props.fuse);\n        return fuse.search(value).map(function (item, index) {\n          return Object.assign({}, item, {\n            index: index\n          });\n        });\n      }\n\n      return options;\n    }\n  }, {\n    key: \"scrollToSelected\",\n    value: function scrollToSelected() {\n      var force = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var selected = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'hover';\n\n      if (!force && (this.props.multiple || this.state.highlighted == null || !this.select.current || !this.state.focus || this.state.options.length < 1) || !this.selectOptions.current) {\n        return;\n      }\n\n      var selectedItem = this.selectOptions.current.querySelector(\".\".concat(_Bem.default.m(this.classes.option, selected)));\n\n      if (selectedItem) {\n        var searchOffset = this.search.current ? this.search.current.clientHeight : 0;\n        this.select.current.scrollTop = selectedItem.offsetTop - searchOffset - this.props.height / 2 + selectedItem.clientHeight / 2;\n      }\n    }\n    /**\n     * Component render\n     * -------------------------------------------------------------------------*/\n\n  }, {\n    key: \"renderOption\",\n    value: function renderOption(option, stateValue, multiple) {\n      var _this5 = this;\n\n      var elementVal = option.value;\n      var element = null;\n      var className = this.classes.option;\n      className += \" \".concat(this.classes.row);\n\n      if (this.state.highlighted === option.index) {\n        className += \" \".concat(_Bem.default.m(this.classes.option, 'hover'));\n      }\n\n      if (multiple && stateValue.indexOf(elementVal) >= 0 || elementVal === stateValue) {\n        className += \" \".concat(_Bem.default.m(this.classes.option, 'selected'));\n      }\n\n      if (this.props.multiple) {\n        if (this.state.value.indexOf(option.value) < 0) {\n          element = _react.default.createElement(\"li\", {\n            role: \"menuitem\",\n            className: className,\n            onClick: function onClick() {\n              return _this5.chooseOption(option.value);\n            },\n            key: \"\".concat(option.value, \"-option\"),\n            \"data-value\": option.value\n          }, this.props.renderOption(option, this.state, this.props));\n        } else {\n          element = _react.default.createElement(\"li\", {\n            role: \"menuitem\",\n            className: className,\n            onClick: function onClick() {\n              return _this5.removeOption(option.value);\n            },\n            key: \"\".concat(option.value, \"-option\"),\n            \"data-value\": option.value\n          }, this.props.renderOption(option, this.state, this.props));\n        }\n      } else if (option.value === this.state.value) {\n        element = _react.default.createElement(\"li\", {\n          role: \"menuitem\",\n          className: className,\n          key: \"\".concat(option.value, \"-option\"),\n          \"data-value\": option.value\n        }, this.props.renderOption(option));\n      } else {\n        element = _react.default.createElement(\"li\", {\n          role: \"menuitem\",\n          className: className,\n          onClick: function onClick() {\n            return _this5.chooseOption(option.value);\n          },\n          key: \"\".concat(option.value, \"-option\"),\n          \"data-value\": option.value\n        }, this.props.renderOption(option, this.state, this.props));\n      }\n\n      return element;\n    }\n  }, {\n    key: \"renderOptions\",\n    value: function renderOptions() {\n      var _this6 = this;\n\n      var select = null;\n      var selectStyle = {};\n      var options = [];\n      var multiple = this.props.multiple;\n      var _this$state2 = this.state,\n          stateValue = _this$state2.value,\n          foundOptions = _this$state2.options;\n\n      if (foundOptions && foundOptions.length > 0) {\n        var groupedOptions = (0, _GroupOptions.default)(foundOptions);\n\n        if (groupedOptions && groupedOptions.length) {\n          groupedOptions.forEach(function (option) {\n            if ({}.hasOwnProperty.call(option, 'type') && option.type === 'group') {\n              var subOptions = [];\n              option.items.forEach(function (groupOption) {\n                subOptions.push(_this6.renderOption(groupOption, stateValue, multiple));\n              });\n              options.push(_react.default.createElement(\"li\", {\n                className: _this6.classes.row,\n                key: option.groupId\n              }, _react.default.createElement(\"div\", {\n                className: _this6.classes.group\n              }, _react.default.createElement(\"div\", {\n                className: _this6.classes.groupHeader\n              }, _this6.props.renderGroupHeader(option.name)), _react.default.createElement(\"ul\", {\n                className: _this6.classes.options\n              }, subOptions))));\n            } else {\n              options.push(_this6.renderOption(option, stateValue, multiple));\n            }\n          });\n\n          if (options.length > 0) {\n            select = _react.default.createElement(\"ul\", {\n              ref: this.selectOptions,\n              className: this.classes.options\n            }, options);\n          }\n        }\n      }\n\n      if (this.props.multiple) {\n        selectStyle.height = this.props.height;\n      }\n\n      var className = this.classes.select;\n\n      if (this.state.focus) {\n        className += \" \".concat(_Bem.default.m(this.classes.select, 'display'));\n      }\n\n      return _react.default.createElement(\"div\", {\n        ref: this.select,\n        className: className,\n        style: selectStyle\n      }, select);\n    }\n  }, {\n    key: \"renderOutElement\",\n    value: function renderOutElement() {\n      var _this7 = this;\n\n      var option = null;\n      var outElement;\n\n      if (this.props.multiple) {\n        if (Object.prototype.toString.call(this.state.value) == '[object Array]' && this.state.value.length) {\n          var finalValueOptions = [];\n          this.state.value.forEach(function (value) {\n            option = _this7.findByValue(_this7.state.defaultOptions, value);\n            finalValueOptions.push(_react.default.createElement(\"option\", {\n              key: option.value,\n              value: option.value\n            }, option.name));\n          });\n          outElement = _react.default.createElement(\"select\", {\n            value: this.state.value,\n            className: this.classes.out,\n            name: this.props.name,\n            readOnly: true,\n            multiple: true\n          }, finalValueOptions);\n        } else {\n          outElement = _react.default.createElement(\"select\", {\n            className: this.classes.out,\n            name: this.props.name,\n            readOnly: true,\n            multiple: true\n          }, _react.default.createElement(\"option\", null, \"Nothing selected\"));\n        }\n      } else if (this.props.search) {\n        outElement = _react.default.createElement(\"input\", {\n          type: \"hidden\",\n          autoComplete: this.props.autoComplete,\n          defaultValue: this.state.value,\n          ref: this.outInput,\n          name: this.props.name\n        });\n      } else {\n        var outStyle = {\n          opacity: 0,\n          position: 'absolute',\n          top: '-9999px',\n          left: '-9999px'\n        };\n        outElement = _react.default.createElement(\"input\", {\n          type: \"text\",\n          autoComplete: this.props.autoComplete,\n          onFocus: this.onFocus,\n          style: outStyle,\n          value: this.state.value,\n          readOnly: true,\n          ref: this.outInput,\n          name: this.props.name\n        });\n      }\n\n      return outElement;\n    }\n  }, {\n    key: \"renderSearchField\",\n    value: function renderSearchField() {\n      var searchField = null;\n\n      if (this.props.search) {\n        var name = null;\n        searchField = _react.default.createElement(\"input\", {\n          name: name,\n          autoComplete: this.props.autoComplete,\n          ref: this.search,\n          onFocus: this.onFocus,\n          onKeyPress: this.onKeyPress,\n          className: this.classes.search,\n          type: \"search\",\n          value: this.state.search,\n          onChange: this.onChange,\n          placeholder: this.props.placeholder\n        });\n      } else {\n        if (this.props.multiple) {\n          return null;\n        }\n\n        var option;\n        var labelValue;\n        var labelClassName;\n\n        if (!this.state.value) {\n          labelValue = this.props.placeholder;\n          labelClassName = \"\".concat(this.classes.search, \" \").concat(_Bem.default.m(this.classes.search, 'placeholder'));\n        } else {\n          option = this.findByValue(this.state.defaultOptions, this.state.value);\n\n          if (!option) {\n            option = this.state.defaultOptions[0];\n          }\n\n          labelValue = option.name;\n          labelClassName = this.classes.search;\n        }\n\n        searchField = _react.default.createElement(\"div\", {\n          tabIndex: 0,\n          role: \"button\",\n          onClick: this.toggle,\n          className: labelClassName\n        }, this.props.renderValue(labelValue, option, this.state, this.props));\n      }\n\n      return searchField;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var className = this.state.focus ? this.classes.focus : this.classes.container;\n      return _react.default.createElement(\"div\", {\n        className: className,\n        ref: this.container\n      }, this.renderOutElement(), this.renderSearchField(), this.renderOptions());\n    }\n  }]);\n\n  return SelectSearch;\n}(_react.default.PureComponent);\n\n_defineProperty(SelectSearch, \"defaultProps\", {\n  className: 'select-search-box',\n  search: true,\n  value: '',\n  placeholder: null,\n  multiple: false,\n  height: 200,\n  name: null,\n  autoComplete: 'on',\n  autofocus: false,\n  onHighlight: function onHighlight() {},\n  onMount: function onMount() {},\n  onBlur: function onBlur() {},\n  onFocus: function onFocus() {},\n  onChange: function onChange() {},\n  renderOption: function renderOption(option) {\n    return option.name;\n  },\n  renderGroupHeader: function renderGroupHeader(title) {\n    return title;\n  },\n  renderValue: function renderValue(label) {\n    return label;\n  },\n  fuse: {\n    keys: ['name', 'groupName'],\n    threshold: 0.3\n  }\n});\n\nvar _default = (0, _reactOnclickoutside.default)(SelectSearch);\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}